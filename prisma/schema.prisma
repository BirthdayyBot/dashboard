generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model birthday {
  id       BigInt  @id @default(autoincrement())
  user_id  String  @db.VarChar(32)
  guild_id String  @db.VarChar(32)
  birthday String  @db.VarChar(10)
  disabled Boolean @default(false)

  @@unique([user_id, guild_id], map: "unique_user_guild")
  @@index([birthday], map: "index_birthday_birthday")
  @@index([guild_id], map: "index_guild_id_birthday")
  @@index([user_id], map: "index_user_id_birthday")
}

model blacklist {
  id       BigInt   @id @default(autoincrement())
  guild_id String   @db.VarChar(32)
  user_id  String   @db.VarChar(32)
  added_at DateTime @default(now()) @db.Timestamp(0)
  disabled Boolean  @default(false)

  @@unique([user_id, guild_id], map: "unique_user_guild_blacklist")
  @@index([guild_id], map: "index_guild_id_blacklist")
  @@index([user_id], map: "index_user_id_blacklist")
}

model blocklist {
  id       BigInt   @id @default(autoincrement())
  guild_id String   @db.VarChar(32)
  user_id  String   @db.VarChar(32)
  added_at DateTime @default(now()) @db.Timestamp(0)
  disabled Boolean  @default(false)

  @@index([guild_id], map: "index_guild_id_blocklist")
  @@index([user_id], map: "index_user_id_blocklist")
}

model guild {
  guild_id             String    @id @db.VarChar(32)
  inviter              String?   @db.VarChar(20)
  announcement_channel String?   @db.VarChar(20)
  announcement_message String    @default("<:arrwright:931267038746390578> Today is a special Day!{NEW_LINE}<:gift:931267039094534175> Please wish {MENTION} a happy Birthday <3") @db.VarChar(512)
  overview_channel     String?   @db.VarChar(20)
  overview_message     String?   @db.VarChar(20)
  birthday_role        String?   @db.VarChar(20)
  birthday_ping_role   String?   @db.VarChar(20)
  log_channel          String?   @db.VarChar(20)
  timezone             Int       @default(0)
  premium              Boolean   @default(false)
  language             String    @default("en-US") @db.VarChar(5)
  last_updated         DateTime? @default(now()) @db.Timestamp(0)
  disabled             Boolean   @default(false)

  @@index([last_updated], map: "index_last_updated_guild")
}

model premium {
  id       Int     @id @default(autoincrement())
  user_id  String  @db.VarChar(32)
  guild_id String? @db.VarChar(32)
  tier     Boolean @default(true)
}

model tiers {
  id           Int      @id @default(autoincrement())
  name         String?  @db.VarChar(512)
  last_updated DateTime @default(now()) @db.Timestamp(0)
}

model user {
  user_id       String   @id @db.VarChar(32)
  username      String?  @db.VarChar(32)
  discriminator String?  @db.VarChar(4)
  premium       Boolean  @default(false)
  last_updated  DateTime @default(now()) @db.Timestamp(0)

  @@index([username], map: "index_user_birthday")
}
